<!DOCTYPE html>
<html>
<head>
  <title>Mood Check-In</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 60px;
    }

    .top-left {
      position: absolute;
      top: 20px;
      left: 20px;
    }

    .mood-btn {
      font-size: 40px;
      margin: 10px;
      cursor: pointer;
      border: none;
      background: none;
    }

    .action-btn {
      margin: 10px;
      padding: 10px 18px;
      font-size: 15px;
      border-radius: 20px;
      border: none;
      cursor: pointer;
      background-color: #6c63ff;
      color: white;
    }

    .hidden {
      display: none;
    }

    .fade {
      animation: fade 0.5s;
    }

    .send-btn {
    padding: 10px 16px;
    font-size: 14px;
    border-radius: 25px;
    border: none;
    background-color: #6c63ff;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.2s;
  }

  .send-btn:hover {
    background-color: #574fe0;
    transform: scale(1.05);
  }

  .tabs {
    margin: 20px 0;
  }

  .tabs button {
    margin: 5px;
    padding: 8px 14px;
    border-radius: 20px;
    border: 1px solid #ccc;
    background: white;
    cursor: pointer;
  }

  .tabs button:hover {
    background-color: #f0f0ff;
  }

  .blog-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .blog-card {
    border: 1px solid #ddd;
    border-radius: 10px;
    overflow: hidden;
    text-align: left;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .blog-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .blog-card img {
    width: 100%;
    height: 140px;
    object-fit: cover;
  }

  .blog-card h4 {
    padding: 10px;
    font-size: 15px;
  }

    @keyframes fade {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>

<!-- ğŸ”¹ TOP LEFT STATS -->
<div class="top-left">
  <button class="action-btn" onclick="openStats()">ğŸ“Š Mood Stats</button>
</div>

<!-- Screen 1: Home -->
<div id="screen1">
  <h2>How are you feeling today?</h2>

  <button class="mood-btn" onclick="selectMood('excited')">ğŸ˜„</button>
  <button class="mood-btn" onclick="selectMood('happy')">ğŸ˜Š</button>
  <button class="mood-btn" onclick="selectMood('neutral')">ğŸ˜</button>
  <button class="mood-btn" onclick="selectMood('sad')">ğŸ˜”</button>
  <button class="mood-btn" onclick="selectMood('stressed')">ğŸ˜£</button>

  <br><br>

  <button class="action-btn" onclick="openCalm()">ğŸ§˜ Calm Space</button>
  <button class="action-btn" onclick="openBlogs()">ğŸ“– Read Blogs</button>
</div>

<!-- Screen 2 -->
<div id="screen2" class="hidden fade">
  <h2 id="empathyText"></h2>
  <p>Do you want to talk about it?</p>
  <button class="action-btn" onclick="goToChat()">Yes, letâ€™s talk</button>
</div>

<!-- Screen 3: Chat -->
<div id="screen3" class="hidden fade">
  <h2>Iâ€™m here to listen</h2>

  <div style="margin: 20px;">
    <input id="userInput" type="text"
           placeholder="Type how youâ€™re feeling..."
           style="width: 60%; padding: 10px;" />
    <button class="send-btn" onclick="sendMessage()">Send</button>
  </div>

  <p id="botReply"></p>
</div>

<!-- Screen 5: Calm Space -->
<div id="screen5" class="hidden fade">
  <h2>ğŸ§˜ Calm Space</h2>

  <p style="font-size: 18px; margin-bottom: 10px;">
    Letâ€™s slow things down for a moment.
  </p>

  <p style="margin-bottom: 20px;">
    Breathe inâ€¦ Holdâ€¦ Breathe outâ€¦
  </p>

  <!-- Video Container -->
  <div style="
    display: flex;
    justify-content: center;
    margin: 20px 0;
  ">
    <iframe
      src="https://www.youtube.com/embed/aNXKjGFUlMs"
      title="Breathing Exercise"
      style="
        width: 80%;
        max-width: 720px;
        aspect-ratio: 16 / 9;
        border-radius: 12px;
      "
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen>
    </iframe>
  </div>

  <p style="margin-top: 15px;">
    Stay here for as long as you need.
  </p>

  <button class="action-btn" onclick="goHome()" style="margin-top: 20px;">
    Back
  </button>
</div>



<!-- Screen 6: Blogs -->
<div id="screen6" class="hidden fade">
  <h2>ğŸ“– Read & Reflect</h2>

  <!-- Tabs -->
  <div class="tabs">
    <button onclick="showBlogs('happy')">ğŸ˜Š Happy</button>
    <button onclick="showBlogs('stress')">ğŸ˜£ Stress Relief</button>
    <button onclick="showBlogs('anger')">ğŸ˜¡ Anger</button>
    <button onclick="showBlogs('calm')">ğŸ§˜ Calm</button>
  </div>

  <!-- Blog Grid -->
  <div id="blogGrid" class="blog-grid"></div>

  <br>
  <button class="action-btn" onclick="goHome()">Back</button>
</div>


<script>
function hideAll() {
  ["screen1","screen2","screen3","screen5","screen6"]
    .forEach(id => document.getElementById(id).classList.add("hidden"));
}

function selectMood(mood) {
  fetch("/save_mood", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ mood })
  });

  hideAll();

  const messages = {
    excited: "Thatâ€™s wonderful! I love that energy âœ¨",
    happy: "Iâ€™m glad youâ€™re feeling happy today ğŸ˜Š",
    neutral: "Thanks for checking in. Iâ€™m here with you.",
    sad: "Iâ€™m really sorry youâ€™re feeling sad ğŸ’™",
    stressed: "That sounds heavy. Letâ€™s take this slowly."
  };

  document.getElementById("empathyText").innerText = messages[mood];
  document.getElementById("screen2").classList.remove("hidden");
}

function goToChat() {
  hideAll();
  document.getElementById("screen3").classList.remove("hidden");
}

function sendMessage() {
  const input = document.getElementById("userInput").value;
  if (!input) return;

  fetch("/ai_chat", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ message: input })
  })
    .then(res => res.json())
    .then(data => {
      document.getElementById("botReply").innerText = data.reply;
    });

  document.getElementById("userInput").value = "";
}

function openStats() {
  window.location.href = "/stats_view";
}

function openCalm() {
  hideAll();
  document.getElementById("screen5").classList.remove("hidden");
}

function openBlogs() {
  hideAll();
  document.getElementById("screen6").classList.remove("hidden");
}

function goHome() {
  hideAll();
  document.getElementById("screen1").classList.remove("hidden");
}
const blogs = {
  happy: [
    {
      title: "Finding Joy in Small Moments",
      img: "https://picsum.photos/400/300?random=11",
      link: "https://medium.com/@mindful"
    },
    {
      title: "Why Happiness Is a Practice",
      img: "https://picsum.photos/400/300?random=12",
      link: "https://medium.com/@personal-growth"
    },
    {
      title: "The Science of Feeling Good",
      img: "https://picsum.photos/400/300?random=13",
      link: "https://medium.com/@psychology"
    }
  ],

  stress: [
    {
      title: "How to Calm Your Mind When Stressed",
      img: "https://picsum.photos/400/300?random=21",
      link: "https://medium.com/@anxiety"
    },
    {
      title: "Simple Ways to Reduce Daily Stress",
      img: "https://picsum.photos/400/300?random=22",
      link: "https://medium.com/@mentalhealth"
    }
  ],

  anger: [
    {
      title: "Understanding Anger Without Judgement",
      img: "https://picsum.photos/400/300?random=31",
      link: "https://medium.com/@emotions"
    },
    {
      title: "Healthy Ways to Process Anger",
      img: "https://picsum.photos/400/300?random=32",
      link: "https://medium.com/@selfgrowth"
    }
  ],

  calm: [
    {
      title: "The Power of Slowing Down",
      img: "https://picsum.photos/400/300?random=41",
      link: "https://medium.com/@mindfulness"
    },
    {
      title: "Breathing Techniques for Inner Peace",
      img: "https://picsum.photos/400/300?random=42",
      link: "https://medium.com/@wellbeing"
    }
  ]
};

function showBlogs(category) {
  const grid = document.getElementById("blogGrid");
  grid.innerHTML = "";

  blogs[category].forEach(blog => {
    const card = document.createElement("a");
    card.href = blog.link;
    card.target = "_blank";
    card.className = "blog-card";
    card.style.textDecoration = "none";
    card.style.color = "inherit";

    card.innerHTML = `
      <img src="${blog.img}" alt="Blog image">
      <h4>${blog.title}</h4>
    `;

    grid.appendChild(card);
  });
}
</script>

</body>
</html>
